(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/record/record"],{"2b94":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("5029"),r=n("5067"),i=n("f0ee"),o=function(){return Promise.all([n.e("common/vendor"),n.e("components/search")]).then(n.bind(null,"ddde"))},c=requirePlugin("WechatSI"),s=c.getRecordRecognitionManager(),u={data:function(){return{currentText:"",translateText:"",typeName:"",isRecording:!1}},onLoad:function(){this.initRecord()},methods:{initRecord:function(){var t=this;s.onRecognize=function(e){var n=e.result;t.currentText=n},s.onStop=function(e){var n=e.result;""!==n&&(t.currentText=n,t.translateTextAction())}},streamRecord:function(){s.start({lang:"zh_CN"}),t.vibrateShort(),this.isRecording=!0},endStreamRecord:function(){t.vibrateShort(),s.stop(),this.isRecording=!1},translateTextAction:function(){this.getData(),this.textToSpeech(),this.translate()},getData:function(){var e=this,n=this.currentText.slice(0,-1);(0,i.setHistory)(n),(0,a.get)({url:r.queryGarbagUrl,params:{name:n}}).then(function(a){if(a.data&&0!==a.data.length){var r=a.data.findIndex(function(t){return t.name===n}),i=a.data[r].type;t.hideLoading(),e.setType(i)}else t.showToast({title:"识别失败，请重试"})})},setType:function(t){var e="";switch(t){case 1:e="是可回收垃圾!";break;case 2:e="是有害垃圾!";break;case 4:e="是湿垃圾!";break;case 8:e="是干垃圾!";break;case 16:e="是大件垃圾!";break}this.typeName=e},textToSpeech:function(){c.textToSpeech({lang:"zh_CN",tts:!0,content:this.currentText,success:function(e){console.log("succ tts",e.filename),t.playBackgroundAudio({dataUrl:e.filename,title:""})},fail:function(t){console.log("fail tts",t)}})},translate:function(){var t=this,e="zh_CN",n="en_US";c.translate({lfrom:e,lto:n,content:this.currentText,tts:!1,success:function(e){t.translateText=e.result}})},navigateToDetail:function(){if(this.currentText){var e=this.currentText.slice(0,-1);t.navigateTo({url:"/pages/detail/detail?key=".concat(e)})}}},components:{Search:o}};e.default=u}).call(this,n("543d")["default"])},3792:function(t,e,n){"use strict";var a=n("f681"),r=n.n(a);r.a},"7a16":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r})},"9f76":function(t,e,n){"use strict";n.r(e);var a=n("7a16"),r=n("f312");for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);n("3792");var o=n("2877"),c=Object(o["a"])(r["default"],a["a"],a["b"],!1,null,null,null);e["default"]=c.exports},f312:function(t,e,n){"use strict";n.r(e);var a=n("2b94"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=r.a},f681:function(t,e,n){}},[["a1ba","common/runtime","common/vendor"]]]);